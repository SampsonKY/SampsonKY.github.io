<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="react,">





  <link rel="alternate" href="/atom.xml" title="SampsonKY" type="application/atom+xml">






<meta name="description" content="react生命周期React 生命周期图  React生命周期四大阶段：  Initialization:初始化阶段。 Mounting: 挂载阶段。 Updation: 更新阶段。 Unmounting: 销毁阶段  什么是生命周期函数？ 一句话：  生命周期函数指在某一个时刻组件会自动调用执行的函数。  比如：todo里的reder()函数就是一个生命周期函数，它在 state发生改变时自动执">
<meta name="keywords" content="react">
<meta property="og:type" content="article">
<meta property="og:title" content="react生命周期">
<meta property="og:url" content="http://yoursite.com/2020/03/15/生命周期/index.html">
<meta property="og:site_name" content="SampsonKY">
<meta property="og:description" content="react生命周期React 生命周期图  React生命周期四大阶段：  Initialization:初始化阶段。 Mounting: 挂载阶段。 Updation: 更新阶段。 Unmounting: 销毁阶段  什么是生命周期函数？ 一句话：  生命周期函数指在某一个时刻组件会自动调用执行的函数。  比如：todo里的reder()函数就是一个生命周期函数，它在 state发生改变时自动执">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://jspang.com/images/React1901.png">
<meta property="og:updated_time" content="2020-03-15T11:22:09.833Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="react生命周期">
<meta name="twitter:description" content="react生命周期React 生命周期图  React生命周期四大阶段：  Initialization:初始化阶段。 Mounting: 挂载阶段。 Updation: 更新阶段。 Unmounting: 销毁阶段  什么是生命周期函数？ 一句话：  生命周期函数指在某一个时刻组件会自动调用执行的函数。  比如：todo里的reder()函数就是一个生命周期函数，它在 state发生改变时自动执">
<meta name="twitter:image" content="https://jspang.com/images/React1901.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/03/15/生命周期/">





  <title>react生命周期 | SampsonKY</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SampsonKY</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/15/生命周期/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="SampsonKY">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SampsonKY">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">react生命周期</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-15T19:22:14+08:00">
                2020-03-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端学习/" itemprop="url" rel="index">
                    <span itemprop="name">前端学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="react生命周期"><a href="#react生命周期" class="headerlink" title="react生命周期"></a>react生命周期</h1><p><strong>React 生命周期图</strong></p>
<p><img src="https://jspang.com/images/React1901.png" alt="React声明周期图"></p>
<p>React生命周期四大阶段：</p>
<ol>
<li><code>Initialization</code>:初始化阶段。</li>
<li><code>Mounting</code>: 挂载阶段。</li>
<li><code>Updation</code>: 更新阶段。</li>
<li><code>Unmounting</code>: 销毁阶段</li>
</ol>
<p><strong>什么是生命周期函数？</strong></p>
<p>一句话：</p>
<blockquote>
<p>生命周期函数指在某一个时刻组件会自动调用执行的函数。</p>
</blockquote>
<p>比如：todo里的<code>reder()</code>函数就是一个生命周期函数，它在 state发生改变时自动执行。这就是一个标准的自动执行函数。 </p>
<ul>
<li><code>constructor</code>不算生命周期函数。</li>
</ul>
<p><code>constructor</code>我们叫构造函数，它是ES6的基本语法。虽然它和生命周期函数的性质一样，但不能认为是生命周期函数。</p>
<p>但是你要心里把它当成一个生命周期函数，可以看成React的<code>Initialization</code>阶段，定义属性（props）和状态(state)。</p>
<p><strong>Mounting阶段（挂载阶段）</strong></p>
<p>Mounting阶段伴随着整个虚拟DOM的生成，它里面包括三个小的生命周期函数，分别是：</p>
<ol>
<li><p><strong><code>componentWillMount</code></strong> : 在组件即将被挂载到页面的时刻执行。</p>
</li>
<li><p><strong><code>render</code></strong> : 页面state或props发生变化时执行。</p>
<p>render函数会插入jsx生成的dom结构，react会生成一份虚拟dom树，在每一次组件更新时，在此react会通过其diff算法比较更新前后的新旧DOM树，比较以后，找到最小的有差异的DOM节点，并重新渲染</p>
</li>
<li><p><strong><code>componentDidMount</code></strong> : 组件挂载完成时被执行。</p>
<p>组件第一次渲染完成，此时的dom节点已经生成，可以在这里调用ajax请求，返回数据setState后组件会重新渲染</p>
</li>
</ol>
<ul>
<li><code>componentWillMount</code>和<code>componentDidMount</code>这两个生命周期函数，只在页面刷新时执行一次，而<code>render</code>函数是只要有state和props变化就会执行 </li>
</ul>
<p><strong>Updation阶段（更新阶段）</strong></p>
<p> <code>Updation</code>阶段是组件发生改变的更新阶段，这是React生命周期中比较复杂的一部分，它有两个基本部分组成，一个是<code>props</code>属性改变，一个是<code>state</code>状态改变 </p>
<ul>
<li><p><strong>shouldComponentUpdate函数</strong></p>
<p> <code>shouldComponentUpdate</code>函数会在组件更新之前，自动被执行。  它要求返回一个布尔类型的结果，必须有返回值 ， 返回true，就同意组件更新；返回false,就反对组件更新。 </p>
<p>shouldComponentUpdate有两个参数：</p>
<ul>
<li><p>nextProps:变化后的属性;</p>
</li>
<li><p>nextState:变化后的状态;</p>
</li>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//避免子组件频繁无用渲染render</span></span><br><span class="line">shouldComponentUpdate(nextProps,nextState)&#123;</span><br><span class="line">    <span class="keyword">if</span>(nextProps.content !== <span class="keyword">this</span>.props.content)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>componentWillUpadate函数</strong></p>
<p> <code>componentWillUpdate</code>在组件更新之前，但<code>shouldComponenUpdate</code>之后被执行。但是如果<code>shouldComponentUpdate</code>返回false，这个函数就不会被执行了。 </p>
</li>
<li><p><strong>componentDidUpdate函数</strong></p>
<p> <code>componentDidUpdate</code>在组件更新之后执行，它是组件更新的最后一个环节。 </p>
</li>
<li><p><strong>componentWillReceiveProps函数</strong></p>
<blockquote>
<p> 子组件接收到父组件传递过来的参数，父组件render函数重新被执行，这个生命周期就会被执行。 </p>
</blockquote>
<ul>
<li>也就是说这个组件第一次存在于Dom中，函数是不会被执行的;</li>
<li>如果已经存在于Dom中，函数才会被执行。</li>
</ul>
</li>
</ul>
<p><strong>Unmounting阶段（卸载阶段）</strong></p>
<ul>
<li><p><strong>componentWillUnmount函数</strong></p>
<p> 这个函数是组件从页面中删除的时候执行 。</p>
<blockquote>
<ol>
<li>clear你在组件中所有的setTimeout、setInterval</li>
<li>移除所有组件中的兼听 removeEventListener</li>
</ol>
</blockquote>
</li>
</ul>
<p><strong>参考：</strong></p>
<p><a href="[https://jspang.com/posts/2019/05/04/new-react-base.html#%E7%AC%AC20%E8%8A%82%EF%BC%9Areact%E9%AB%98%E7%BA%A7-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E8%AE%B2%E8%A7%A3-2](https://jspang.com/posts/2019/05/04/new-react-base.html#第20节：react高级-生命周期讲解-2)">技术胖</a></p>
<p><a href="https://www.jianshu.com/p/c9bc994933d5" target="_blank" rel="noopener">react生命周期基本用法</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/react/" rel="tag"># react</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/15/利用react-router4的react-router-config做路由鉴权/" rel="next" title="利用react-router4的react-router-config做路由鉴权">
                <i class="fa fa-chevron-left"></i> 利用react-router4的react-router-config做路由鉴权
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/03/15/ReactHooks/" rel="prev" title="React Hooks">
                React Hooks <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="SampsonKY">
            
              <p class="site-author-name" itemprop="name">SampsonKY</p>
              <p class="site-description motion-element" itemprop="description">Dreams are destined to be lonely, and there is no doubt and ridicule on the road, but what about it, even if it is bruised and bruised, it must live beautifully.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/SampsonKY" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:theonekangyong@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#react生命周期"><span class="nav-number">1.</span> <span class="nav-text">react生命周期</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SampsonKY</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
